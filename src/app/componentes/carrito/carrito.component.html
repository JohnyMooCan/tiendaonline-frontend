<app-navbar></app-navbar>
<div class="container-fluid Container">

    <div class="row">

        <div class="col-md-1">

        </div>
        <div class="col-md-10 ">

            <h4 class="title-h4">Mi carrito</h4>
            <p *ngIf="mostrarvacio" class="text-body-secondary text-cuantos">El carrito se encuentra vacio.</p>
            <div class="container" *ngIf="!mostrarSpinner && !mostrarvacio">
                <table mat-table [dataSource]="lstCarrito" class=" mat-elevation-z8 ">

                    <ng-container matColumnDef="nombre">
                        <th mat-header-cell *matHeaderCellDef> Producto </th>
                        <td mat-cell *matCellDef="let element"> {{element.nombre}} </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="imagen">
                        <th mat-header-cell *matHeaderCellDef> </th>
                        <td mat-cell *matCellDef="let element"> <img [src]="element.imagen" height="50px" /> </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>

                    <ng-container matColumnDef="cantidad">
                        <th mat-header-cell *matHeaderCellDef> Cantidad </th>
                        <td mat-cell *matCellDef="let element">

                            <input matInput class="input-cantidad" placeholder="" min="0" type="number"
                                [(ngModel)]="element.cantidad">
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>

            
                    <ng-container matColumnDef="precio">
                        <th mat-header-cell *matHeaderCellDef> Precio </th>
                        <td mat-cell *matCellDef="let element"> {{element.precio | currency }} </td>
                        <td mat-footer-cell *matFooterCellDef style="text-align: end;"><b> Total:</b></td>
                    </ng-container>

                
                    <ng-container matColumnDef="subtotal">
                        <th mat-header-cell *matHeaderCellDef> Subtotal </th>
                        <td mat-cell *matCellDef="let element"> {{ element.precio * element.cantidad | currency }} </td>
                        <td mat-footer-cell *matFooterCellDef> {{ calculatotal() | currency}}</td>
                    </ng-container>

            
                    <ng-container matColumnDef="actions">
                        <th mat-header-cell *matHeaderCellDef> </th>
                        <td mat-cell *matCellDef="let element" class="action-link">
                            <a (click)="deleteRowData(element)" title="Eliminar del carrito"><i
                                    class="fas fa-trash fa-hover-red"></i></a>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="Columns"></tr>
                    <tr mat-row *matRowDef="let row; columns: Columns;"></tr>
                    <tr mat-footer-row *matFooterRowDef="['nombre','imagen','cantidad','precio','subtotal']"></tr>
                </table>

                <button class="btn btn-dark float-end btn-pagar " (click)="openDialog()" type="button">Pagar</button>
            </div>
            <app-spinner *ngIf="mostrarSpinner" ></app-spinner>
            <!--- <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons>
        </mat-paginator>-->
            <!--<table class="table table-hover table-sm">
            <thead class="thead-dark">
              <tr>
                <th scope="col">Producto</th>
                <th scope="col">Cantidad</th>
                <th scope="col">Precio</th>
                <th scope="col">Subtotal</th>
              </tr>
            </thead>
            <tbody>
              <tr  *ngFor="let producto of lstCarrito">
                <td> {{ producto.precio }}</td>
                <td> {{ producto.cantidad }}</td>
                <td> {{ producto.precio | currency }}</td>
                <td> {{ producto.precio * producto.cantidad | currency }}</td>
              </tr>
            </tbody>
          </table>-->
        </div>

        <div class="col-md-1">

        </div>
    </div>

</div>